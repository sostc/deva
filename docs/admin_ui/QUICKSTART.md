# Deva Admin UI 快速开始指南

## 🚀 5 分钟上手 Admin UI

### 步骤 1：启动 Admin

```bash
# 方法 1：模块方式（推荐）
python -m deva.admin

# 方法 2：直接运行
python deva/admin.py
```

启动后会看到：
```
============================================================
Deva Admin UI 启动成功！
访问地址：http://127.0.0.1:9999
============================================================
```

### 步骤 2：访问界面

1. 打开浏览器
2. 访问：`http://127.0.0.1:9999`
3. 首次使用会提示创建管理员账户

### 步骤 3：创建账户

```
┌─────────────────────────────────────┐
│ ### 首次使用引导                     │
│                                     │
│ 用户名：admin ________________      │
│ 密码：   ****** ________________    │
│ 确认密码：****** ________________   │
│                                     │
│ [创建账户]                          │
└─────────────────────────────────────┘
```

### 步骤 4：登录

输入刚创建的账户信息，点击登录。

---

## 📋 导航菜单介绍

登录后看到导航菜单：

```
┌─────────────────────────────────────────────────────────┐
│ ⚡ Deva                                                 │
│                                                         │
│ 🏠首页 | ⭐关注 | 🌐浏览器 | 💾数据库 | 🚌Bus | ...    │
└─────────────────────────────────────────────────────────┘
```

### 菜单功能说明

| 菜单 | 功能 | 适合场景 |
|------|------|---------|
| 🏠 首页 | 系统概览 | 查看系统状态 |
| ⭐ 关注 | 关注的内容 | 快速访问常用功能 |
| 🌐 浏览器 | 浏览器管理 | 网页自动化 |
| 💾 数据库 | 数据库管理 | 数据 CRUD 操作 |
| 🚌 Bus | 消息总线 | 跨进程通信 |
| 📊 命名流 | 流管理 | 查看数据流状态 |
| 📡 数据源 | 数据源管理 | 配置数据源 |
| 📈 策略 | 策略管理 | 量化策略管理 |
| 👁 监控 | 系统监控 | 监控系统状态 |
| ⏰ 任务 | 任务管理 | 定时任务管理 |
| ⚙️ 配置 | 系统配置 | 修改配置 |
| 📄 文档 | 文档中心 | 查看文档 |
| 🤖 AI | AI 功能 | AI 代码生成等 |

---

## 💡 常用功能快速上手

### 1. 查看数据流

**路径：** 📊 命名流

```
1. 点击 **📊 命名流** 菜单
2. 查看所有命名流列表
3. 点击流名称查看详情
4. 可以查看：
   - 数据量
   - 最后更新时间
   - 下游消费者
```

### 2. 创建量化策略

**路径：** 📈 策略

```
1. 点击 **📈 策略** 菜单
2. 点击 **➕ 创建策略** 按钮
3. 填写策略信息：
   - 策略名称：双均线策略
   - 策略代码：（或使用 AI 生成）
4. 点击 **保存**
5. 启动策略
```

**使用 AI 生成策略：**
```
1. 点击 **🤖 AI 生成策略** 按钮
2. 填写需求：
   - 策略名称：双均线策略
   - 策略描述：当 5 日均线上穿 20 日均线时买入
3. 点击 **生成代码**
4. 审查生成的代码
5. 确认后保存
```

### 3. 配置数据源

**路径：** 📡 数据源

```
1. 点击 **📡 数据源** 菜单
2. 点击 **➕ 创建数据源**
3. 填写数据源信息：
   - 名称：股票数据
   - 类型：timer
   - 代码：（或使用 AI 生成）
4. 配置参数：
   - 更新频率：5 秒
   - 输入参数：股票代码
5. 保存并启动
```

### 4. 使用 AI 功能

**路径：** 🤖 AI

**首次配置：**
```
1. 点击 **🤖 AI** 菜单
2. 点击 **📝 配置 Kimi**
3. 填写配置：
   - API Key: sk-xxxxx
   - Base URL: https://api.moonshot.cn/v1
   - 模型：moonshot-v1-8k
4. 点击 **保存**
5. 点击 **🧪 测试 Kimi** 验证配置
```

**生成代码：**
```
1. 点击 **💻 代码生成** Tab
2. 选择要生成的类型：
   - 📊 量化策略
   - 📈 数据源
   - ⚙️ 任务
3. 填写需求描述
4. 点击 **生成代码**
5. 审查并保存
```

### 5. 查看文档

**路径：** 📄 文档

```
1. 点击 **📄 文档** 菜单
2. 查看文档 Tabs：
   - 快速开始
   - 安装指南
   - 使用指南
   - 最佳实践
   - 故障排查
   - API 参考
   - 术语表
   - 示例文档
   - 各模块 API 文档
3. 点击 Tab 切换文档
```

---

## 🎯 典型使用场景

### 场景 1：监控日志

```python
# 1. 创建日志监控流
from deva import from_textfile, warn

s = from_textfile('/var/log/app.log', start=True)
s.filter(lambda line: 'ERROR' in line) >> warn

# 2. 在 Admin UI 中查看
# 访问 👁 监控 查看实时日志
```

### 场景 2：定时任务

```python
# 1. 创建定时任务
from deva import timer, log

timer(interval=60, func=lambda: "heartbeat", start=True) >> log

# 2. 在 Admin UI 中管理
# 访问 ⏰ 任务 查看任务状态
```

### 场景 3：策略回测

```python
# 1. 创建策略
from deva import StrategyUnit

class MyStrategy(StrategyUnit):
    def process(self, data):
        return 'buy' if data['price'] > 100 else 'sell'

# 2. 在 Admin UI 中
# 访问 📈 策略 -> 启动策略 -> 查看执行结果
```

---

## ⚠️ 常见问题

### Q: 无法访问 Admin UI？

**A:** 检查：
1. 是否正确启动：`python -m deva.admin`
2. 端口是否被占用：`lsof -i:9999`
3. 防火墙设置

### Q: 忘记密码？

**A:** 
```bash
# 删除配置文件重新创建
rm -rf ~/.deva/config
# 重启 Admin
python -m deva.admin
```

### Q: AI 功能无法使用？

**A:** 
1. 检查是否配置了模型
2. 测试连接是否正常
3. 查看 API Key 是否有效

### Q: 策略无法启动？

**A:** 
1. 检查策略代码是否有语法错误
2. 查看日志中的错误信息
3. 确认数据源已启动

---

## 📚 下一步

完成快速开始后，可以查看：

- [架构文档](ARCHITECTURE.md) - 了解 Admin UI 架构
- [策略管理指南](strategy_guide.md) - 深入学习策略管理
- [数据源指南](datasource_guide.md) - 学习数据源配置
- [任务管理指南](task_guide.md) - 学习任务管理
- [AI 功能指南](ai_center_guide.md) - 学习 AI 功能

---

**最后更新：** 2026-02-26  
**适用版本：** Deva v1.4.1+
